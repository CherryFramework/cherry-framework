!function(e,r){"use strict";r.utilites.namespace("ui_elements.repeater"),r.ui_elements.repeater={init:function(e){r.status.is_ready?this.render(e):r.variable.$document.on("ready",this.render.bind(this,e))},triggerChange:function(e){var r=e.find("input[name]:first, select[name]:first");void 0!==wp.customize&&(r.trigger("change"),r.trigger("keydown"),r.trigger("propertychange"))},render:function(r){var t=e(".cherry-ui-repeater-container",r);t.each(this.repeatHandle.bind(t,this))},repeatHandle:function(t){var i=e(this),a=e(".cherry-ui-repeater-list",i),n=a.data("name"),c=a.data("title-field"),s=wp.template(n);i.on("click",".cherry-ui-repeater-add",function(e){var i=a.data("index"),n=a.append(s({index:i})).find(".cherry-ui-repeater-item:last");e.preventDefault(),r.variable.$window.trigger("cherry-ui-elements-init",{target:n}),i++,a.data("index",i),t.triggerChange(n)}),a.on("click",".cherry-ui-repeater-remove",function(r){r.preventDefault(),e(this).closest(".cherry-ui-repeater-item").remove(),t.triggerChange(a)}),a.on("click",".cherry-ui-repeater-toggle",function(r){var t=e(this).closest(".cherry-ui-repeater-item"),i="cherry-ui-repeater-min";r.preventDefault(),t.hasClass(i)?t.removeClass(i):t.addClass(i)}),a.on("change","."+c+"-wrap input, textarea, select",function(){var r=e(this),t=r.val(),i=r.closest(".cherry-ui-repeater-item"),a=e(".cherry-ui-repeater-title",i);a.html(t)}),a.sortable({items:".cherry-ui-repeater-item",handle:".cherry-ui-repeater-actions-box",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"sortable-placeholder",update:function(){t.triggerChange(e(this))}})}},e(window).on("cherry-ui-elements-init",function(e,t){r.ui_elements.repeater.init(t.target)})}(jQuery,window.CherryJsCore);